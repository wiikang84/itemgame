<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î£∞Î†õ - ItemGame</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/roulette.css">
</head>
<body class="roulette-page">
    <!-- Ïä§Ìè¨Ìä∏ÎùºÏù¥Ìä∏ Ïò§Î≤ÑÎ†àÏù¥ -->
    <div class="roulette-spotlight-overlay"></div>

    <!-- Ìó§Îçî -->
    <header class="header">
        <div class="header-logo" onclick="location.href='index.html'" style="cursor:pointer">ITEM<span>GAME</span></div>
        <div class="header-center">
            <div class="header-chips">
                <div class="chip-icon">$</div>
                <div class="chip-balance" id="headerChips">0</div>
            </div>
            <div class="level-badge">
                <span class="level-text" id="levelDisplay">Lv.1</span>
                <div class="xp-bar"><div class="xp-bar-fill" id="xpBarFill"></div></div>
                <span class="xp-text" id="xpText">0/500</span>
            </div>
        </div>
        <nav class="header-nav">
            <button class="nav-btn" onclick="location.href='index.html'">Î°úÎπÑ</button>
            <button class="sound-toggle" id="soundToggleBtn" onclick="SoundManager.toggleMute()" title="ÏÜåÎ¶¨ ÎÅÑÍ∏∞">üîä</button>
        </nav>
    </header>

    <!-- Î©îÏù∏ -->
    <main class="container">
        <div class="roulette-container">
            <!-- Ïπ¥ÏßÄÎÖ∏ ÌÖåÏù¥Î∏î ÌîÑÎ†àÏûÑ -->
            <div class="roulette-table-outer" id="rouletteTableOuter">
                <div class="roulette-frame">
                    <!-- ÌÉÄÏù¥ÌãÄ Î∞∞ÎÑà -->
                    <div class="roulette-title-banner">
                        <div class="title-deco left">‚ô¶</div>
                        <div class="roulette-title">EUROPEAN ROULETTE</div>
                        <div class="title-deco right">‚ô¶</div>
                    </div>

                    <!-- Ìú† -->
                    <div class="wheel-area">
                        <div class="wheel-wrapper">
                            <div class="wheel-marker"></div>
                            <canvas class="wheel-canvas" id="wheelCanvas"></canvas>
                        </div>
                    </div>

                    <!-- Í≤∞Í≥º Ïà´Ïûê -->
                    <div class="result-number" style="display:none">
                        <div class="number-display" id="resultNumberDisplay">-</div>
                    </div>

                    <!-- Í≤∞Í≥º -->
                    <div class="result-display" id="rouletteResult"></div>

                    <!-- ÌûàÏä§ÌÜ†Î¶¨ -->
                    <div class="history-bar" id="historyBar">
                        <span style="color:var(--text-dim);font-size:0.8rem">Í≤∞Í≥º ÌûàÏä§ÌÜ†Î¶¨</span>
                    </div>
                </div>
            </div>

            <!-- Î≤†ÌåÖ ÌÖåÏù¥Î∏î -->
            <div class="betting-table-outer">
                <div class="betting-table">
                    <div class="betting-table-title">PLACE YOUR BETS</div>
                    <!-- Ïà´Ïûê Í∑∏Î¶¨Îìú -->
                    <div class="number-grid" id="numberGrid">
                        <!-- JSÎ°ú ÏÉùÏÑ± -->
                    </div>

                    <!-- ÏïÑÏõÉÏÇ¨Ïù¥Îìú Î≤†ÌåÖ -->
                    <div class="outside-bets" id="outsideBets">
                        <!-- JSÎ°ú ÏÉùÏÑ± -->
                    </div>

                    <!-- Ïª¨Îüº Î≤†ÌåÖ -->
                    <div class="column-bets" id="columnBets">
                        <!-- JSÎ°ú ÏÉùÏÑ± -->
                    </div>
                </div>
            </div>

            <!-- Ïª®Ìä∏Î°§ Ìå®ÎÑê -->
            <div class="roulette-controls">
                <!-- Ïπ© ÏÑ†ÌÉù -->
                <div class="bet-chip-selector">
                    <button class="bet-chip-option c100 active" data-value="100" onclick="Roulette.selectChip(100)">100</button>
                    <button class="bet-chip-option c500" data-value="500" onclick="Roulette.selectChip(500)">500</button>
                    <button class="bet-chip-option c1000" data-value="1000" onclick="Roulette.selectChip(1000)">1K</button>
                    <button class="bet-chip-option c5000" data-value="5000" onclick="Roulette.selectChip(5000)">5K</button>
                    <button class="bet-chip-option c10000" data-value="10000" onclick="Roulette.selectChip(10000)">10K</button>
                    <button class="bet-chip-option c50000" data-value="50000" onclick="Roulette.selectChip(50000)">50K</button>
                </div>

                <!-- Ï¥ù Î≤†ÌåÖ + ÌÄµ Î≤ÑÌäº Ìïú Ï§Ñ -->
                <div class="controls-row">
                    <div class="total-bet-display">
                        TOTAL BET: <strong id="totalBet">0</strong>
                    </div>
                    <div class="quick-bet-buttons">
                        <button class="quick-btn rebet-btn" onclick="Roulette.rebet()">REBET</button>
                        <button class="quick-btn double-btn" onclick="Roulette.doubleBet()">x2</button>
                        <button class="quick-btn allin-btn" onclick="Roulette.allIn()">ALL-IN</button>
                    </div>
                </div>

                <!-- Ïï°ÏÖò Î≤ÑÌäº -->
                <div class="roulette-action-buttons">
                    <button class="btn btn-outline btn-sm" onclick="Roulette.clearBets()">Ï¥àÍ∏∞Ìôî</button>
                    <button class="spin-roulette-btn" id="spinRouletteBtn" onclick="Roulette.spin()" disabled>SPIN</button>
                    <button class="auto-spin-btn" id="autoSpinBtn" onclick="Roulette.toggleAutoSpin()">AUTO</button>
                </div>

                <!-- ÏÉÅÌÉú Î©îÏãúÏßÄ -->
                <div class="bj-status" id="rouletteStatus"></div>
            </div>

            <!-- Í∑úÏπô -->
            <div class="roulette-rules">
                <h3>RULES</h3>
                <ul>
                    <li>Ïú†ÎüΩÏãù Î£∞Î†õ: 0~36 (Ï¥ù 37Ïπ∏)</li>
                    <li><strong>Ïà´Ïûê ÏßÅÏ†ë Î≤†ÌåÖ</strong>: 35:1 Î∞∞Îãπ</li>
                    <li><strong>12Îã®ÏúÑ</strong> (1st/2nd/3rd 12): 2:1 Î∞∞Îãπ</li>
                    <li><strong>Ïª¨Îüº</strong> (Col 1/2/3): 2:1 Î∞∞Îãπ</li>
                    <li><strong>Îπ®Í∞ï/Í≤ÄÏ†ï, ÌôÄ/Ïßù, 1-18/19-36</strong>: 1:1 Î∞∞Îãπ</li>
                    <li>0Ïù¥ ÎÇòÏò§Î©¥ ÏïÑÏõÉÏÇ¨Ïù¥Îìú Î≤†ÌåÖ Ï†ÑÎ∂Ä Ìå®Î∞∞</li>
                </ul>
            </div>
        </div>
    </main>

    <!-- ÏΩîÏù∏ ÏÉ§Ïõå Ï∫îÎ≤ÑÏä§ -->
    <canvas id="coinShowerCanvas"></canvas>

    <!-- ÌÜ†Ïä§Ìä∏ -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Î†àÎ≤®ÏóÖ Ïò§Î≤ÑÎ†àÏù¥ -->
    <div class="levelup-overlay" id="levelupOverlay">
        <div class="levelup-content">
            <div class="levelup-title" id="levelupTitle">LEVEL UP!</div>
            <div class="levelup-bonus" id="levelupBonus">+0 Ïπ©</div>
        </div>
    </div>

    <!-- ÌïòÎã® ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò (Î™®Î∞îÏùº) -->
    <nav class="bottom-nav">
        <div class="bottom-nav-inner">
            <a href="index.html" class="bottom-nav-item">
                <span class="nav-icon">üè†</span>
                <span class="nav-label">Ìôà</span>
            </a>
            <a href="index.html#dailyBonusBanner" class="bottom-nav-item">
                <span class="nav-icon">üéÅ</span>
                <span class="nav-label">Î≥¥ÎÑàÏä§</span>
            </a>
            <button class="bottom-nav-item" onclick="SoundManager.toggleMute()">
                <span class="nav-icon">üîä</span>
                <span class="nav-label">ÏÇ¨Ïö¥Îìú</span>
            </button>
        </div>
    </nav>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <!-- Ïä§ÌÅ¨Î¶ΩÌä∏ -->
    <script src="js/core/firebase-config.js"></script>
    <script src="js/core/chip-manager.js"></script>
    <script src="js/core/sound-manager.js"></script>
    <script src="js/core/coin-shower.js"></script>
    <script src="js/core/level-manager.js"></script>
    <script src="js/core/neon-particles.js"></script>
    <script src="js/games/roulette.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            await ChipManager.init();
            SoundManager.init();
            CoinShower.init();
            LevelManager.init();
            NeonParticles.init();

            ChipManager.onBalanceChange(() => {
                document.getElementById('headerChips').textContent = ChipManager.formatBalance();
            });
            document.getElementById('headerChips').textContent = ChipManager.formatBalance();

            // Î†àÎ≤®ÏóÖ Î¶¨Ïä§ÎÑà
            LevelManager.onEvent((event) => {
                if (event.type === 'levelup') {
                    const overlay = document.getElementById('levelupOverlay');
                    if (overlay) {
                        document.getElementById('levelupTitle').textContent = `LEVEL ${event.level}!`;
                        document.getElementById('levelupBonus').textContent = `+${event.bonus.toLocaleString()} Î≥¥ÎÑàÏä§ Ïπ©`;
                        overlay.classList.add('active');
                        setTimeout(() => overlay.classList.remove('active'), 3000);
                    }
                }
            });

            Roulette.init();
        });
    </script>
</body>
</html>
